<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ç®¡ç†è€…ãƒ†ãƒ³ãƒ—ãƒ¬ç·¨é›†ï¼ˆGistï¼‰</title>
  <style>
    body { font-family: sans-serif; padding: 2em; max-width: 800px; margin: auto; }
    input, button, textarea { font-size: 1em; margin-top: 0.5em; width: 100%; }
    textarea { height: 200px; }
  </style>
</head>
<body>
  <h1>ğŸ” ç®¡ç†è€…ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç·¨é›†ï¼ˆGitHub Gistï¼‰</h1>

  <label for="token">GitHubãƒˆãƒ¼ã‚¯ãƒ³ï¼š</label>
  <input type="password" id="token" placeholder="ghp_..." />

  <label for="gistId">Gist IDï¼š</label>
  <input id="gistId" value="YOUR_GIST_ID_HERE" />

  <label for="content">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç·¨é›†ï¼š</label>
  <textarea id="content"></textarea>

  <button onclick="loadGist()">ğŸ“¥ Gistèª­è¾¼</button>
  <button onclick="saveGist()">ğŸ’¾ Gistä¿å­˜</button>

  <script>
    async function loadGist() {
      const id = document.getElementById('gistId').value.trim();
      const res = await fetch(`https://api.github.com/gists/${id}`);
      const data = await res.json();
      const fileKey = Object.keys(data.files)[0];
      document.getElementById('content').value = data.files[fileKey].content;
    }

    async function saveGist() {
      const token = document.getElementById('token').value.trim();
      const id = document.getElementById('gistId').value.trim();
      const content = document.getElementById('content').value;

      const res = await fetch(`https://api.github.com/gists/${id}`, {
        method: 'PATCH',
        headers: {
          'Authorization': `token ${token}`,
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          files: {
            'template.txt': {
              content: content
            }
          }
        })
      });

      if (res.ok) {
        alert("ä¿å­˜ã—ã¾ã—ãŸï¼");
      } else {
        alert("ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ");
      }
    }
  </script>
</body>
</html>
